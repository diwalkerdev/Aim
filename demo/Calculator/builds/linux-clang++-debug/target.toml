projectRoot = "../.."

compilerFrontend="gcc"
compiler = "clang++"
archiver = "ar"

flags = [
    "-std=c++17",
    "-O3",
    "-g",
    "-fsanitize=address",
    "-fno-omit-frame-pointer", # get nicer stack traces from address sanitizer.
    "-fsanitize=undefined",
    "-Wall",
]

[[builds]]                              
    name = "calculatorstatic"
    buildRule = "staticLibrary"
    outputName = "CalculatorStatic"
    sourceFiles = ["lib/*.cpp"]
    includePaths = ["include"]

[[builds]]
    name = "calculatordynamic"
    buildRule = "dynamicLibrary"
    outputName = "CalculatorShared"
    sourceFiles = ["lib/*.cpp"]
    includePaths = ["include"]

[[builds]]
    name = "calculatortests"
    buildRule = "executable"
    requires = ["calculatorstatic"]
    outputName = "CalculatorTests"
    sourceFiles = ["tests/*.cpp"]
    includePaths = ["include"]
    # The libraryPaths and libraries fields can be used to specify additional
    # libraries and paths to the build. This allows for linking against third
    # party libraries.
    #libraryPaths = []
    #libraries = []

[[builds]]
    name = "calculatorapp"
    buildRule = "executable"
    requires = ["calculatordynamic"]
    outputName = "CalculatorApp"
    sourceFiles = ["src/*.cpp"]
    includePaths = ["include"]
